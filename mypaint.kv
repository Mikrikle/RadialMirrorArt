#:kivy 1.0

<MyPopup>:
    auto_dismiss: False
    title_align:'center'
    size_hint:.9,.8


<CustomDropDown>:
    canvas.before:
        Color: 
            rgba: .1, .1, .1, 1
        RoundedRectangle:
            size:(self.size[0], self.size[1])
            pos:(self.pos[0], self.pos[1])
            radius: [(20, 20), (20, 20), (20, 20), (20, 20)]
    MDRoundFlatIconButton:
        font_size: "5sp"
        text:'Simple'
        icon:'current-ac'
        on_release:root.select(('simple', 'current-ac'))
    MDRoundFlatIconButton:
        font_size: "5sp"
        text:'Mirror'
        icon:'arrow-split-vertical'
        on_release:root.select(('symmetric', 'arrow-split-vertical'))
    MDRoundFlatIconButton:
        font_size: "5sp"
        text:'Double-mirror'
        icon:'crop-square'
        on_release:root.select(('square', 'crop-square'))
    MDRoundFlatIconButton:
        font_size: "5sp"
        text:'Radian'
        icon:'decagram-outline'
        on_release:root.select(('radian', 'decagram-outline'))
    MDRoundFlatIconButton:
        font_size: "5sp"
        text:'Radian-symmetric'
        icon:'decagram'
        on_release:root.select(('radian-symmetric', 'decagram'))



<ToolBox@BoxLayout>:
    size_hint:(1, .1)
    canvas.before:
        Color: 
            rgba: .1, .1, .1, 1
        Rectangle:
            size:(self.size[0], self.size[1])
            pos:(self.pos[0], self.pos[1])


<MyPaintWidget>:

<Container>:
    paint:paint
    MyPaintWidget:
        id:paint
        down_current_color_label:down_current_color_label
        down_current_line_width:down_current_line_width
        down_current_nums_of_lines:down_current_nums_of_lines
        drawing_mode_select_btn:drawing_mode_select_btn
        down_current_icon:down_current_icon
        pos_hint:{'x':0, 'y':.2}
        size_hint:(1,1)
        canvas.before:
            Color: 
                rgba: 1, 0, 0, 1
            Rectangle:
                size:(2, 2)
                pos:(self.size[0]//2-1, self.size[1]//2-1)


    ToolBox:
        pos_hint:{'x':0, 'y':.9}
        padding:20
        MDIconButton:
            icon:'delete'
            text:'clear'
            on_release:paint.clear_canvas()
        Widget:
        MDIconButton:
            icon:'undo'
            text:'undo'
            on_release:paint.undo()
        MDIconButton:
            icon:'redo'
            text:'redo'
            on_release:paint.redo()
        Widget:
        MDRoundFlatIconButton:
            id:drawing_mode_select_btn
            icon:'brush'
            text:'Settings'
            on_release:paint.open_draw_popup()

    ToolBox:
        size_hint:(1,.1)
        paddig:5
        pos_hint:{'x':0, 'y':0}
        BoxLayout:
            id:box
            paddig:10
            MDIconButton:
                size_hint:.5,1
                halign: "center"
                id:down_current_icon
                icon:'decagram-outline'
                on_release:paint.dropdown_drawing_mode.open(box)
            Label:
                id:down_current_nums_of_lines
                text:'Lines\n10'
            Label:
                id:down_current_line_width
                text:'Width\n2'
            Button:
                id:down_current_color_label
                size_hint:.5,1
                background_normal:''
                background_color:.1,.1,.1,1
                on_release:paint.open_color_popup()
                #user_font_size:'10sp'
                canvas:
                    RoundedRectangle:
                        size:(self.size[0]-20, self.size[1]-20)
                        pos:(self.pos[0]+10, self.pos[1]+10)
                        radius: [(10, 10), (10, 10), (10, 10), (10, 10)]
